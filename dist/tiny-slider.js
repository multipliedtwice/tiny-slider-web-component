class t extends HTMLElement{constructor(){var t,s;super(),this.fill=!0,this._gap="0",this._transitionDuration=300,this.threshold=30,this.t=0,this.i=[],this.h=0,this.maxWidth=0,this.o=0,this.l=!1,this.u=!1,this.v=!1,this.p=0,this.m=0,this.goTo=t=>{const s=t.detail;s&&"number"==typeof s.change&&this.M(s.change)},this.attachShadow({mode:"open"}),this.C(),this.sliderElement=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector(".slider"),this.contentElement=null===(s=this.shadowRoot)||void 0===s?void 0:s.querySelector(".slider-content"),this.L(),this.S(),this.A(),this.events=[{type:"mousedown",handler:this.R,target:this.sliderElement},{type:"mouseup",handler:this.k,target:this.sliderElement},{type:"mousemove",handler:this.move,target:this.sliderElement},{type:"touchstart",handler:this.R,target:this.sliderElement},{type:"touchend",handler:this.k,target:this.sliderElement},{type:"touchmove",handler:this.move,target:this.sliderElement},{type:"keydown",handler:this.O,target:document}]}P(){this.contentElement&&(this.contentElement.style.transition=`transform ${this._transitionDuration}ms`,this.contentElement.style.gap=this._gap)}get gap(){return this._gap}set gap(t){this._gap!==t&&(this._gap=t,this.P())}get transitionDuration(){return this._transitionDuration}set transitionDuration(t){this._transitionDuration!==t&&(this._transitionDuration=t,this.P())}get I(){return this.t}A(){this.R=this.R.bind(this),this.k=this.k.bind(this),this.move=this.move.bind(this),this.O=this.O.bind(this),this.D=this.D.bind(this)}$(t){this.events.forEach((s=>{const i=t?"addEventListener":"removeEventListener";s.target[i](s.type,s.handler)}))}connectedCallback(){var t,s;this.$(!0),null===(s=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector("slot"))||void 0===s||s.addEventListener("slotchange",this.D),this.P(),this.M(this.t),this.addEventListener("change-index",this.goTo)}disconnectedCallback(){var t,s;this.$(!1),null===(s=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector("slot"))||void 0===s||s.removeEventListener("slotchange",this.D),this.resizeObserver&&this.resizeObserver.disconnect(),this.resizeSliderObserver&&this.resizeSliderObserver.disconnect(),this.removeEventListener("change-index",this.goTo)}D(){var t,s;null===(s=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector("slot"))||void 0===s||s.assignedNodes()}L(){this.gap="0",this.fill=!0,this.transitionDuration=300,this.threshold=30,this.t=0,this.i=[],this.h=0,this.maxWidth=0,this.o=0,this.l=!1,this.u=!1,this.v=!1,this.p=0,this.m=0}M(t){const s=this.contentElement.children.length,i=Math.max(0,Math.min(t,s-1));this.t!==i&&(this.t=i,this.j(),this.H())}R(t){this.T(t)&&(t.preventDefault(),this.p=t.pageX||t.touches[0].pageX,this.u=!0)}move(t){if(!this.u)return;const s=t.pageX||t.touches[0].pageX;this.m=this.h+(this.p-s),this.X(this.m),this.v=Math.abs(this.m-this.h)>this.threshold}X(t){this.contentElement&&(this.contentElement.style.transform=`translateX(-${t}px)`)}k(t){this.u&&(this.v?this.j():this.M(this.t),this.u=!1,this.v=!1)}O(t){this.T(document.activeElement)&&("ArrowLeft"!=t.key&&"ArrowRight"!=t.key||("ArrowLeft"==t.key&&this.M(this.t-1),"ArrowRight"==t.key&&this.M(this.t+1)))}j(){var t;const s=null===(t=this.q())||void 0===t?void 0:t.map((t=>t.offsetLeft));let i=this.t;this.v&&(null==s?void 0:s.length)&&(i+=this.m>this.h?1:-1,i=Math.max(0,Math.min(i,(null==s?void 0:s.length)-1))),this.t=i,this.B(null==s?void 0:s[this.t],!0)}B(t,s=!1){this.h=t;const i=this.maxWidth-this.o;this.X(this.h),this.l=this.h>=i,this.l&&(this.fill&&s&&(this.h=i),this.X(this.h))}H(){const t=this.F();Array.from(t).forEach(((t,s)=>{this.h+this.o<t||this.i.includes(s)||(this.i=[...this.i,s])}))}S(){this.resizeObserver=new ResizeObserver((t=>{for(const s of t){const t=s.contentBoxSize[0]||s.contentBoxSize;this.maxWidth=t.inlineSize}})),this.resizeObserver.observe(this.contentElement),this.resizeSliderObserver=new ResizeObserver((t=>{for(const s of t)s.target===this.sliderElement&&(this.o=s.contentRect.width)})),this.resizeSliderObserver.observe(this.sliderElement)}F(){var t;return null===(t=this.q())||void 0===t?void 0:t.map((t=>t.offsetLeft))}q(){const t=this.contentElement.querySelector("slot");return null==t?void 0:t.assignedElements()}T(t){return null==t?void 0:t.composedPath().some((t=>{var s;return null===(s=t.classList)||void 0===s?void 0:s.contains("slider-content")}))}C(){this.shadowRoot&&(this.shadowRoot.innerHTML='<style>.slider{overflow-x:hidden;touch-action:pan-y;cursor:grab}.slider-content{display:flex;align-items:flex-start;width:fit-content;transition:transform 300ms;gap:0}.grabbing{cursor:grabbing}</style><div class="slider"><div class="slider-content"><slot></slot></div><slot name="controls"></slot></div>')}}window.customElements.define("tiny-slider-web-component",t);